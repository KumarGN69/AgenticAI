# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/introduction/learn-gitpod/gitpod-yaml)
# and commit this file to your remote git repository to share the goodness with others.

# Learn more from ready-to-use templates: https://www.gitpod.io/docs/introduction/getting-started/quickstart

tasks:
  - name: "Project setup"
    init: |
      echo "Creating virtual environment"
      python -m venv .venv
    command: |
      echo "Activating virtual environment and installing dependencies"
      bash -c "
        source .venv/bin/activate && \
        pip install -r requirements.txt && \
        echo 'Installing Ollama' && \
        curl -fsSL https://ollama.com/install.sh | sh && \
        echo 'Starting Ollama in background' && \
        nohup ollama serve > ollama.log 2>&1 & \
        sleep 5 && \
        echo 'Pulling Mistral model' && \
        ollama pull mistral:latest

